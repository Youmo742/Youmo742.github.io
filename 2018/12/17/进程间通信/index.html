<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="进程通信,IPC," />










<meta name="description" content="1.Race Condition(竞争条件) two or more processes are reading or writing some shared data and the final result depends on who runs precisely when, are called race conditions.  2.Critical Region (关键区) mutua">
<meta name="keywords" content="进程通信,IPC">
<meta property="og:type" content="article">
<meta property="og:title" content="进程间通信">
<meta property="og:url" content="http://yoursite.com/2018/12/17/进程间通信/index.html">
<meta property="og:site_name" content="忧漠的博客">
<meta property="og:description" content="1.Race Condition(竞争条件) two or more processes are reading or writing some shared data and the final result depends on who runs precisely when, are called race conditions.  2.Critical Region (关键区) mutua">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyaz7eg5pkj30ik0cmmyl.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyaz2nlzhqj30kf096dg9.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyazdnlo53j30ii06rwf7.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyb2w2ejvoj30ht07iwfg.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyb2tn9yhej30ik0jhjtt.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyb61ladpkj30id0h0762.jpg">
<meta property="og:updated_time" content="2019-01-17T07:37:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进程间通信">
<meta name="twitter:description" content="1.Race Condition(竞争条件) two or more processes are reading or writing some shared data and the final result depends on who runs precisely when, are called race conditions.  2.Critical Region (关键区) mutua">
<meta name="twitter:image" content="https://ws1.sinaimg.cn/large/00746wNnly1fyaz7eg5pkj30ik0cmmyl.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/12/17/进程间通信/"/>





  <title>进程间通信 | 忧漠的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">忧漠的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">总有一个舞台属于你</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/17/进程间通信/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Youmo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/32959859?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="忧漠的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">进程间通信</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-17T00:00:00+08:00">
                2018-12-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/操作系统/" itemprop="url" rel="index">
                    <span itemprop="name">操作系统</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-Race-Condition-竞争条件"><a href="#1-Race-Condition-竞争条件" class="headerlink" title="1.Race Condition(竞争条件)"></a>1.Race Condition(竞争条件)</h2><ol>
<li>two or more processes are reading or writing some shared data and the final result depends on who runs precisely when, are called <strong>race conditions</strong>.</li>
</ol>
<h2 id="2-Critical-Region-关键区"><a href="#2-Critical-Region-关键区" class="headerlink" title="2.Critical Region (关键区)"></a>2.Critical Region (关键区)</h2><ol>
<li>mutual exclusion(互斥)，避免两个或者以上的进程同时读写共享的数据。</li>
<li>That part of the program where the shared memory is accessed is called the <strong>critical region</strong> or <strong>critical section</strong>。(对共享内存访问的程序叫做<strong>临界区</strong>)。</li>
<li>一个满足条件的设计应当满足下面四个条件：<ul>
<li>任何两个进程不得同时位于临界区。</li>
<li>不对CPU数量和速度做假设。</li>
<li>在临界区外的进程不得阻塞其他进程。</li>
<li>任何进程不得永远等待进入临界区。</li>
</ul>
</li>
</ol>
<h2 id="3-实现互斥的方法"><a href="#3-实现互斥的方法" class="headerlink" title="3.实现互斥的方法"></a>3.实现互斥的方法</h2><p>注：下面这些方法只是实现进程或者线程间同步／互斥的方式，并不是进程间通信的方式。</p>
<h3 id="1-忙等待的互斥"><a href="#1-忙等待的互斥" class="headerlink" title="1.忙等待的互斥"></a>1.忙等待的互斥</h3><p><strong>忙等待：</strong>一直测试一个变量直到出现某个值</p>
<p>自旋锁(spin lock)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//process 0</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(turn!=<span class="number">0</span>);</span><br><span class="line">    critical_region( );</span><br><span class="line">	turn = <span class="number">1</span>;</span><br><span class="line">	noncritical_region( );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//process 1</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(turn!=<span class="number">1</span>);</span><br><span class="line">    critical_region( );</span><br><span class="line">	turn = <span class="number">0</span>;</span><br><span class="line">	noncritical_region( );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>Peterson解法</p>
<p><img src="https://ws1.sinaimg.cn/large/00746wNnly1fyaz7eg5pkj30ik0cmmyl.jpg" alt=""></p>
<p><img src="https://ws1.sinaimg.cn/large/00746wNnly1fyaz2nlzhqj30kf096dg9.jpg" alt=""></p>
<p>用一个全局变量interested[2],开始都置为false,有一个进程进入临界区后，就将他对应的interested 置true,这样，当另一个进程来的时候，检测是否被占有，如果是，就继续循环等待，直到另一个进程释放关键区。</p>
<p>这种解法只适合两个进程。</p>
</li>
<li><p>TSL和XCHG解法</p>
<ol>
<li><p>TSL</p>
<p> <img src="https://ws1.sinaimg.cn/large/00746wNnly1fyazdnlo53j30ii06rwf7.jpg" alt=""></p>
<p> 用汇编语句实现此功能，保证同时只能有一个处理器访问其内容，保证了原子性。</p>
<p> <strong>CMP指令，当两个内容相等，则返回0，JNZ表示如果不为0,则跳转。</strong></p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1.LOCK初值为0,要进入临界区，先将值拷贝到寄存器，然后将LOCK设置为1</span></span><br><span class="line"><span class="comment">2.此时，寄存器值为0,与0比较相等，则进入临界区</span></span><br><span class="line"><span class="comment">3.若此时有另一个进程想进入临界区，LOCK=1,则Register值为1，与0相比，不相等,则继续循环。</span></span><br><span class="line"><span class="comment">4.当进程离开关键区，将LOCK设置为0,其他进程可进入。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>XCHG</p>
<p>上面的<code>TSL REGISTER,LOCK</code>并不能保证原子性，增加了一句<code>mov register #1,xchg register,lock</code>。</p>
</li>
</ol>
</li>
</ol>
<h3 id="2-信号量（semaphore）与互斥量-mutex"><a href="#2-信号量（semaphore）与互斥量-mutex" class="headerlink" title="2.信号量（semaphore）与互斥量(mutex)"></a>2.信号量（semaphore）与互斥量(mutex)</h3><ol>
<li><p>信号量</p>
<p>信号量(Semaphore)，有时被称为信号灯，是在多线程环境下使用的一种设施, 它负责协调各个线程, 以保证它们能够正确、合理的使用公共资源。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*信号量和信号是不同的概念*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>互斥量</p>
<p>互斥锁是用在多线程多任务互斥的，一个线程占用了某一个资源，那么别的线程就无法访问，直到这个线程unlock，其他的线程才开始可以利用这个资源。</p>
<p><img src="https://ws1.sinaimg.cn/large/00746wNnly1fyb2w2ejvoj30ht07iwfg.jpg" alt="">内敛</p>
</li>
<li><p>条件变量</p>
<p>条件变量由两个基本元素构成<strong>wait</strong>和<strong>signal</strong>,wait用来等待，signal用来唤醒其他线程。</p>
<p>用于线程间同步，必须和<strong>mutex</strong>结合使用。</p>
</li>
<li><p><strong>区别</strong></p>
<ol>
<li><p><strong>作用域</strong>：<br> 信号量: 进程间或线程间(linux仅线程间的无名信号量pthread semaphore)<br> 互斥锁: 线程间</p>
</li>
<li><p><strong>上锁时</strong> ：<br> 信号量: 只要信号量的value大于0，其他线程就可以sem_wait成功，成功后信号量的value减一。若value值不大于0，则sem_wait使得线程阻塞，直到sem_post释放后value值加一,但是sem_wait返回之前还是会将此value值减一<br> 互斥锁: 只要被锁住，其他任何线程都不可以访问被保护的资源</p>
</li>
<li><strong>互斥量的加锁和解锁必须由同一线程分别对应使用，信号量可以由一个线程释放，另一个线程得到。</strong></li>
<li><strong>互斥量值只能为0/1，信号量值可以为非负整数。</strong></li>
</ol>
<p><strong>互斥：</strong>是指某一资源同时只允许一个访问者对其进行访问，具有唯一性和排它性。但互斥无法限制访问者对资源的访问顺序，即访问是无序的。</p>
<p><strong>同步：</strong>是指在互斥的基础上（大多数情况），通过其它机制实现访问者对资源的有序访问。在大多数情况下，同步已经实现了互斥，特别是所有写入资源的情况必定是互斥的。少数情况是指可以允许多个访问者同时访问资源</p>
</li>
</ol>
<h3 id="3-消息传递"><a href="#3-消息传递" class="headerlink" title="3.消息传递"></a>3.消息传递</h3><ol>
<li>消息传递的send和receive 是系统调用，由操作系统负责。</li>
</ol>
<h2 id="4-Barriers"><a href="#4-Barriers" class="headerlink" title="4.Barriers"></a>4.Barriers</h2><ol>
<li>也是用来实现同步的一种方式。</li>
<li>当一组进程运行时，希望在某一个地方当所有的进程工作都完成的时候，才允许所有每个进程进入到下一个阶段，这个地方可以设置一个屏障。更多的用在多个进程、线程合作工作的时候。</li>
</ol>
<h2 id="4-进程间通信的方式"><a href="#4-进程间通信的方式" class="headerlink" title="4.进程间通信的方式"></a>4.进程间通信的方式</h2><ol>
<li>管道</li>
<li>信号</li>
<li>共享内存</li>
<li>消息队列</li>
<li>信号量</li>
<li>套接字</li>
</ol>
<h2 id="5-实现生产者消费者"><a href="#5-实现生产者消费者" class="headerlink" title="5.实现生产者消费者"></a>5.实现生产者消费者</h2><ol>
<li><p>信号量</p>
<p><img src="https://ws1.sinaimg.cn/large/00746wNnly1fyb2tn9yhej30ik0jhjtt.jpg" alt=""></p>
<ol start="2">
<li><p>消息传递</p>
<p><img src="https://ws1.sinaimg.cn/large/00746wNnly1fyb61ladpkj30id0h0762.jpg" alt=""></p>
</li>
<li><p>pthread</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 100000</span></span><br><span class="line"><span class="keyword">pthread_mutex_t</span> the_mutex;</span><br><span class="line"><span class="keyword">pthread_cond_t</span> condc, condp;</span><br><span class="line"><span class="keyword">int</span> buffer = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">producer</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="comment">/* how many numbers to produce */</span></span><br><span class="line">	<span class="comment">/* used for signaling */</span></span><br><span class="line">	<span class="comment">/* buffer used between producer and consumer */</span></span><br><span class="line">	<span class="comment">/* produce data */</span></span><br><span class="line">	<span class="keyword">for</span> (i= <span class="number">1</span>; i &lt;= MAX; i++)</span><br><span class="line">	 &#123;</span><br><span class="line">		pthread_mutex_lock(&amp;the_mutex); <span class="comment">/* get exclusive access to buffer */</span></span><br><span class="line">		<span class="keyword">while</span> (buffer != <span class="number">0</span>) </span><br><span class="line">			pthread_cond_wait(&amp;condp, &amp;the_mutex);</span><br><span class="line">        	<span class="comment">/*当wait的时候，就会释放锁，条件满足，则重新加锁*/</span></span><br><span class="line">		buffer = i;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s%d\n"</span>,<span class="string">"I producer"</span>,buffer);</span><br><span class="line">		<span class="comment">/* put item in buffer */</span></span><br><span class="line">		<span class="comment">/* wake up consumer */</span></span><br><span class="line">		pthread_cond_signal(&amp;condc);</span><br><span class="line">		pthread_mutex_unlock(&amp;the_mutex); <span class="comment">/* release access to buffer */</span></span><br><span class="line">	&#125;</span><br><span class="line">	pthread_exit(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">consumer</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="comment">/* consume data */</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= MAX; i++) &#123;</span><br><span class="line">		pthread_mutex_lock(&amp;the_mutex); <span class="comment">/* get exclusive access to buffer */</span></span><br><span class="line">		<span class="keyword">while</span> (buffer ==<span class="number">0</span> ) </span><br><span class="line">			pthread_cond_wait(&amp;condc, &amp;the_mutex);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s%d\n"</span>,<span class="string">"I consumer ed "</span>,buffer);</span><br><span class="line">		buffer = <span class="number">0</span>;</span><br><span class="line">		<span class="comment">/* take item out of buffer */</span></span><br><span class="line">		<span class="comment">/* wake up producer */</span></span><br><span class="line">		pthread_cond_signal(&amp;condp);</span><br><span class="line">		pthread_mutex_unlock(&amp;the_mutex); <span class="comment">/* release access to buffer */</span></span><br><span class="line">	&#125;</span><br><span class="line">	pthread_exit(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> pro, con;</span><br><span class="line">    pthread_mutex_init(&amp;the_mutex, <span class="number">0</span>);</span><br><span class="line">    pthread_cond_init(&amp;condc, <span class="number">0</span>);</span><br><span class="line">    pthread_cond_init(&amp;condp, <span class="number">0</span>);</span><br><span class="line">    pthread_create(&amp;con, <span class="number">0</span>, consumer, <span class="number">0</span>);</span><br><span class="line">    pthread_create(&amp;pro, <span class="number">0</span>, producer, <span class="number">0</span>);</span><br><span class="line">    pthread_join(pro, <span class="number">0</span>);</span><br><span class="line">    pthread_join(con, <span class="number">0</span>);</span><br><span class="line">    pthread_cond_destroy(&amp;condc);</span><br><span class="line">    pthread_cond_destroy(&amp;condp);</span><br><span class="line">    pthread_mutex_destroy(&amp;the_mutex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><ol>
<li><p>IPC是进程间通信？？进程间通信的方式？？？</p>
<p>如果是方式，这些代码怎么实现</p>
<p>进程间通信的方式，要考虑竞争条件和关键区</p>
</li>
<li><p>信号量？？？信号？？？关系，区别</p>
<p>信号量用来实现同步</p>
</li>
<li><p>消息传递</p>
<p>The consumer starts out by sending N empty messages to the producer. Whenever the producer<br>has an item to give to the consumer, it takes an empty message and sends back a full one.</p>
</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/进程通信/" rel="tag"># 进程通信</a>
          
            <a href="/tags/IPC/" rel="tag"># IPC</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/11/23/进程和线程/" rel="next" title="进程和线程">
                <i class="fa fa-chevron-left"></i> 进程和线程
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/23/调度/" rel="prev" title="进程和线程的调度">
                进程和线程的调度 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars3.githubusercontent.com/u/32959859?s=460&v=4"
                alt="Youmo" />
            
              <p class="site-author-name" itemprop="name">Youmo</p>
              <p class="site-description motion-element" itemprop="description">学习的点点滴滴</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Youmo742" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1481414022@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Race-Condition-竞争条件"><span class="nav-number">1.</span> <span class="nav-text">1.Race Condition(竞争条件)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Critical-Region-关键区"><span class="nav-number">2.</span> <span class="nav-text">2.Critical Region (关键区)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-实现互斥的方法"><span class="nav-number">3.</span> <span class="nav-text">3.实现互斥的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-忙等待的互斥"><span class="nav-number">3.1.</span> <span class="nav-text">1.忙等待的互斥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-信号量（semaphore）与互斥量-mutex"><span class="nav-number">3.2.</span> <span class="nav-text">2.信号量（semaphore）与互斥量(mutex)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-消息传递"><span class="nav-number">3.3.</span> <span class="nav-text">3.消息传递</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Barriers"><span class="nav-number">4.</span> <span class="nav-text">4.Barriers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-进程间通信的方式"><span class="nav-number">5.</span> <span class="nav-text">4.进程间通信的方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-实现生产者消费者"><span class="nav-number">6.</span> <span class="nav-text">5.实现生产者消费者</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#问题"><span class="nav-number"></span> <span class="nav-text">问题</span></a></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Youmo</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
