title: 数据库再理解

tags: 数据库

---

## 理解数据库的定义   
.   数据被组织成描述物理和概念上的记录，相关的数据库记录组成表。   
.   数据库包括数据和元数据，元数据用于表述以下事项   
* 表中的列   
* 找出表的中的索引   
* 定义单条记录属性的域（值约束）   
  **元数据放在一个称为数据字典的单独表中**   
## 理解平面文件   
平面文件也是数据记录的集合，查看文件内容时，不会看到元数据。   
## 文件和数据库的差别   
### 文件的管理方式   
数据库文件是由数据库管理系统管理的，平面文件是由**受操作系统的文件管理系统**管理的。两者不同。   
* 处理平面文件的程序必须有特定的代码来定义数据类型和数据的操作，当数据记录发生改变后，必须重新编写用于处理数据的程序。导致，程序员必须了解数是如   
  何存储的。   
* 而数据库文件的操作是由DBMS来控制的，程序员只需指定操作的行动即可。   
* 文件的操作，没有移植性，因为各个操作系统的差异。而数据库，并不会受限。   
### 数据库由**层次模型** -> **网络模型** -> **关系模型**    
层次模型和网络模型，数据之间的联系由**父/子记录指针**描述，关系模型用共同的列，即**（主键和外键）**来描述和约束。   

### 数据库架构   
架构 ！= 模式  。一个数据库中模式只有唯一一个，而架构可以由多个。   
* 架构是一个表的集合。包括   
1. 表   
2. 试图   
3. 断言   
4. 权限   
5. 字符集   
   架构相当于一个容器，可以在容器中创建表和试图等。   
### 表的组成   
表名，列名，数据类型，结构。   
### 基于表创建视图   
一切对表的操作适用于视图，视图是虚拟的表，继承于一个或多个表，各个数据项和列的集合，方便查看和管理。   
**对试图的操作，改变原始数据，即表中的数据**。   
### 域
即为列的可取值的集合，类似于定义域。若不同，给出提示或拒绝执行。   
### 约束   
约束是限制数据的。有七种。   
 断言，域，检查约束，外键约束，主键约束，所需的约束，唯一性约束等。   
 ### 数据库定义语言   
 alter，create,drop,grant   
 ### 数据库操作语言   
 Insert into,select from,update,delete from   
 ### 数据库控制语言   
 commit（永久更新），rollback（撤销操作），grant（授权），revoke（收回授权）   
 ### 数据库事务处理   
 为了数据库安全和完整考虑的，一般在编程语言中实现。   
 ```
 begin transaction
 .
 .---------------------------->rollback(撤销所有操作)
 .
 save transaction（保存更新）
 .
 .---------------------------->rollback(返回到sava transaction)
 .
 commit(永久更新操作)
 ```
## 语句的使用
### 使用alter table 语句   
- 添加列   
  `alter table <表名> add column <列名> <数据类型> <省略值>`   
- 删除列   
  `alter table <表名> drop column <列名>`   
- 改变主键和外键   
  `alter table <表名> add constraint <键名> primary key (要成为主键的列)`   
  `alter table <表名> drop constraint <键名>`   
### 使用update语句   
- 改变列值   
  `update <tablename> set <列名> where <条件>`   
### 授权语句   
`grant <权限>/select/update/delete <列名>，<列名> on <tablename> to <uesr>`   

`revoke <权限> on <tablename> from user`   
